(function(t){function e(e){for(var n,c,r=e[0],l=e[1],s=e[2],p=0,d=[];p<r.length;p++)c=r[p],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&d.push(i[c][0]),i[c]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},i={app:0},o=[];function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var s=0;s<r.length;s++)e(r[s]);var u=l;o.push([3,"chunk-vendors"]),a()})({0:function(t,e){},"0ddd":function(t,e,a){"use strict";a("cf08")},1:function(t,e){},2:function(t,e){},2395:function(t,e,a){},"2e21":function(t,e,a){"use strict";a("6565")},3:function(t,e,a){t.exports=a("56d7")},4:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("keep-alive",[a(t.currentTabComponent,{tag:"component"})],1)],1)},o=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},r=[],l={},s=l,u=a("2877"),p=Object(u["a"])(s,c,r,!1,null,null,null),d=p.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"nav_bar"}),a("div",{staticClass:"main_container"},[a("div",{staticClass:"select_map_container"},[a("Select"),a("Map")],1),a("div",{staticClass:"stat_control_container"},[a("GlobalStat")],1)])])},h=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map",attrs:{id:"hex-map"}},[a("VueDeckgl",{staticClass:"deck-map",attrs:{layers:t.layers,viewState:t.viewState,width:"70vw",height:"80vh"},on:{click:t.handleClick,"view-state-change":t.handleViewStateChange}}),a("div",{ref:"map",attrs:{id:"map"}}),a("el-popover",{staticClass:"control-panel",attrs:{placement:"right",width:"220",trigger:"click"}},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("Coverage")]),a("el-slider",{staticStyle:{width:"200px"},attrs:{width:300,min:0,max:1,step:.01},model:{value:t.coverage,callback:function(e){t.coverage=e},expression:"coverage"}})],1),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("Opacity")]),a("el-slider",{staticStyle:{width:"200px"},attrs:{width:300,min:0,max:1,step:.01},model:{value:t.opacity,callback:function(e){t.opacity=e},expression:"opacity"}})],1),a("div",[a("label",{attrs:{for:"color"}},[t._v("Color Inversion")]),a("input",{attrs:{id:"color",type:"checkbox",name:"color"},on:{change:t.update_layers}}),a("span",{attrs:{id:"color-value"}})]),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("Control Panel")])],1)],1)},m=[],b=a("ade3"),y=a("5530"),g=(a("d81d"),a("a9e3"),a("d3b7"),a("b64b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"deckgl-container",attrs:{width:t.width,height:t.height}},[t._t("default"),a("canvas",{ref:"canvas",attrs:{id:"deck-canvas"},on:{contextmenu:t.handleContextMenu}}),t._t("foreground")],2)}),x=[],_=(a("99af"),a("b680"),a("9b26")),w=a("5a2b"),k={name:"VueDeckgl",props:{width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},layers:{type:Array,default:function(){return[]}},viewState:{type:Object,default:function(){return{latitude:40.6971494,longitude:-74.2598655,zoom:12,pitch:0}},required:!0},cursor:{type:String,default:"default"},controller:{type:[Boolean,Object],default:!0},effects:{type:Array,default:function(){return[]}},disableContextMenu:{type:Boolean,default:!1}},data:function(){return{}},methods:{initializeDeck:function(t,e){var a=this;return new _["a"]({canvas:this.$refs.canvas,width:this.width,height:this.height,style:{"!position":"relative"},viewState:t,controller:this.controller,onViewStateChange:function(t){var e=t.viewState;a.deck.setProps({viewState:e}),a.$emit("view-state-change",e)},onClick:function(t,e){a.$emit("click",{info:t,event:e})},onDrag:function(t,e){a.$emit("drag",{info:t,event:e})},onDragStart:function(t,e){a.$emit("onDragStart",{info:t,event:e})},onDragEnd:function(t,e){a.$emit("onDragEnd",{info:t,event:e})},getCursor:function(t){var e=t.isDragging;return e?"grabbing":a.cursor||"grab"},layers:e,effects:this.effects,getTooltip:function(t){try{if("heatmap"===t.layer.id){var e=t.object;return e&&{text:"Total Population: ".concat(e.totpop," \n White: ").concat((100*e.white/e.totpop).toFixed(2),"% \n Black: ").concat((100*e.black/e.totpop).toFixed(2),"% \n Native American: ").concat((100*e.hisp/e.totpop).toFixed(2),"% \n Asian: ").concat((100*e.asian/e.totpop).toFixed(2),"% \n Num of Census Blocks: ").concat(e.count),style:{position:"relative",fontSize:"12px",color:"#000",backgroundColor:"#efe",width:"200px",height:"100px",overflow:"scroll",marginLeft:"20px",marginTop:"20px",opacity:.75}}}return"Scatter Layer"}catch(a){return}}})},handleContextMenu:function(t){this.disableContextMenu&&t.preventDefault()}},watch:{layers:function(t){this.deck.setProps({layers:t})},viewState:function(t){this.deck.setProps({viewState:Object(y["a"])(Object(y["a"])({},t),{},{transitionInterpolator:new w["a"]})})},effects:function(t){this.deck.setProps({effects:t})}},created:function(){this.deck=null},mounted:function(){this.deck=this.initializeDeck(this.viewState,this.layers)},destroyed:function(){this.deck.finalize()}},j=k,C=(a("0ddd"),Object(u["a"])(j,g,x,!1,null,"1f9e9fd8",null)),S=C.exports,O=a("fbbb"),P=a("3614"),N=a("5698"),M=a("f75e"),T=a("e192"),D=a.n(T),I="mapbox://styles/mapbox/streets-v11",$={name:"Map",components:{VueDeckgl:S},data:function(){return{POIdata:{},ICON_MAPPING:{marker:{x:0,y:0,width:128,height:128,mask:!0}},OPTIONS:["coverage","opacity"],COLOR_RANGE:[[209,55,78]],data:null,viewState:{longitude:-84.388,latitude:33.749,zoom:11,minZoom:3,maxZoom:17,pitch:20},layers:[],map:null,activeNames:"",coverage:.9,opacity:.2}},watch:{coverage:function(t,e){this.update_layers()},opacity:function(t,e){this.update_layers()}},methods:{handleChange:function(t){},handleClick:function(t){},handleViewStateChange:function(t){this.viewState=Object(y["a"])({},t),null!==this.map&&this.map.jumpTo({center:[t.longitude,t.latitude],zoom:t.zoom,bearing:t.bearing,pitch:t.pitch})},update_layers:function(){if(null===this.data)return[];var t=this.data,e=new P["a"](Object(b["a"])({id:"heatmap",data:t,elevationRange:[0,0],opacity:.2,wireframe:!1,filled:!0,extruded:!1,pickable:!0,getHexagon:function(t){return t.hex},getFillColor:function(t){return 1==document.getElementById("color").checked?[0,255*(1-t.totpop/5e3),255]:[255,255*(1-t.totpop/5e3),0]},updateTriggers:{getFillColor:document.getElementById("color").checked},coverage:this.coverage},"opacity",this.opacity)),a=new O["a"]({id:"scatter",data:this.POIdata,opacity:.8,filled:!0,radiusMinPixels:2,radiusMaxPixels:3,getPosition:function(t){return[t[0],t[1]]},getFillColor:function(t){return[0,128,255]},pickable:!0,onHover:function(t){t.object,t.x,t.y}});this.layers=[e,a]},load_dummy_data:function(){var t=this;N["a"]("./dummy_data.csv").then((function(e){t.POIdata=e.map((function(t){return[Number(t.stop_lon),Number(t.stop_lat)]}))}))}},mounted:function(){var t=this;this.load_dummy_data(),this.map=new D.a.Map({accessToken:"pk.eyJ1Ijoic2VuZGF5byIsImEiOiJjams4MjdqOXAyZ2VrM3BydDRzeTR4cjBsIn0.Hk0FF4BvDNJZeDAZZiPlcg",container:this.$refs.map,style:I,interactive:!0,center:[this.viewState.longitude,this.viewState.latitude],zoom:this.viewState.zoom,bearing:0,pitch:this.viewState.pitch});var e=new Promise((function(e,a){N["a"]("lat_lon_to_census_data.csv").then((function(a){t.data=a.map((function(t){return{hex:M["c"](Number(t.lat),Number(t.lon),9),lon:Number(t.lon),lat:Number(t.lat),totpop:Number(t.pop_total),white:Number(t.pop_white),black:Number(t.pop_black),hisp:Number(t.pop_indian_alaskan),asian:Number(t.pop_asian)}})),t.data=t.data.reduce((function(t,e){return t[e.hex]?(t[e.hex].totpop+=e.totpop,t[e.hex].white+=e.white,t[e.hex].black+=e.black,t[e.hex].hisp+=e.hisp,t[e.hex].asian+=e.asian,t[e.hex].count+=1,t):(t[e.hex]=Object(y["a"])(Object(y["a"])({},e),{},{count:1}),t)}),{});var n=t;t.data=Object.keys(t.data).map((function(t){var e=n.data[t];return{hex:e.hex,totpop:e.totpop,count:e.count,white:e.white,black:e.black,hisp:e.hisp,asian:e.asian}})),e(t.data)}))}));e.then((function(e){t.update_layers()}))}},E=$,z=(a("c9e8"),Object(u["a"])(E,v,m,!1,null,"9b743176",null)),F=z.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"globa_stat"},[a("h1",[t._v(" This is the Global Stat ")]),a("div",{staticClass:"block"},[a("el-carousel",{attrs:{trigger:"click",height:"35vh",autoplay:!1}},t._l(t.items,(function(e){return a("el-carousel-item",{key:e},[a("h2",{staticClass:"title"},[t._v(t._s(e))])])})),1)],1)])},B=[],V={name:"GlobalStat",data:function(){return{items:["Housing","Income","Labor","Poverty","Unemployment","Violence"]}}},G=V,H=(a("2e21"),Object(u["a"])(G,A,B,!1,null,"4480aefd",null)),R=H.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"city_select"},[a("el-select",{attrs:{placeholder:"Select City"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.citys,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)},J=[],L=a("262e"),q=a("2caf"),X=a("d4ec"),U=a("bee2"),W=(a("e9c4"),function(){function t(){Object(X["a"])(this,t),this.ajax=new XMLHttpRequest}return Object(U["a"])(t,[{key:"get",value:function(t,e){var a=this;this.ajax.open("GET",t),this.ajax.onreadystatechange=function(){4===a.ajax.readyState&&200===a.ajax.status&&e(a.ajax.responseText)},this.ajax.send()}},{key:"post",value:function(t,e,a){var n=this;this.ajax.open("POST",t),this.ajax.setRequestHeader("Content-Type","application/json"),this.ajax.onreadystatechange=function(){4===n.ajax.readyState&&200===n.ajax.status&&a(n.ajax.responseText)},this.ajax.send(JSON.stringify(e))}}]),t}()),Y=function(t){Object(L["a"])(a,t);var e=Object(q["a"])(a);function a(){return Object(X["a"])(this,a),e.call(this)}return Object(U["a"])(a,[{key:"setCity",value:function(t,e){console.log("setCity",t)}},{key:"clickHexgon",value:function(t,e){console.log("clickHexgon",t)}},{key:"init",value:function(t){console.log("init")}}]),a}(W),K=Y,Q={name:"Select",data:function(){return{citys:[{value:"atl",label:"Atlanta"},{value:"nyc",label:"New York City"},{value:"sf",label:"San Francisco"}],value:""}},methods:{setCityCallback:function(t){console.log(t)}},watch:{value:function(t){var e=new K;e.setCity(t,this.setCityCallback)}}},tt=Q,et=(a("8cb7"),Object(u["a"])(tt,Z,J,!1,null,"534394cc",null)),at=et.exports,nt={name:"Main",components:{Map:F,GlobalStat:R,Select:at}},it=nt,ot=(a("dedd"),Object(u["a"])(it,f,h,!1,null,"1ea34426",null)),ct=ot.exports,rt={name:"App",components:{Compare:d,Main:ct},data:function(){return{currentPage:"Main"}},computed:{currentTabComponent:function(){return"main"===this.currentPage.toLowerCase()?ct:d}}},lt=rt,st=(a("7c55"),Object(u["a"])(lt,i,o,!1,null,null,null)),ut=st.exports,pt=a("2f62");n["default"].use(pt["a"]);var dt=new pt["a"].Store({state:{current_city:"",current_config:{},compare_tuple:[],current_vaccine_centers:[]},mutations:{},actions:{},modules:{}}),ft=a("5c96"),ht=a.n(ft);a("0fae");n["default"].config.productionTip=!1,n["default"].use(ht.a),new n["default"]({store:dt,render:function(t){return t(ut)}}).$mount("#app")},6565:function(t,e,a){},"7c55":function(t,e,a){"use strict";a("2395")},"8a7e":function(t,e,a){},"8cb7":function(t,e,a){"use strict";a("8a7e")},"9e9e":function(t,e,a){},c9e8:function(t,e,a){"use strict";a("e93f")},cf08:function(t,e,a){},dedd:function(t,e,a){"use strict";a("9e9e")},e93f:function(t,e,a){}});
//# sourceMappingURL=app.81762301.js.map